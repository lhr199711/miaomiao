{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./src/components/City/index.vue?4762","webpack:///src/components/City/index.vue","webpack:///./src/components/City/index.vue?09ac","webpack:///./src/components/City/index.vue","webpack:///./src/components/City/index.vue?6bb0","webpack:///./node_modules/core-js/internals/sloppy-array-method.js"],"names":["$","aFunction","toObject","fails","sloppyArrayMethod","test","nativeSort","sort","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","SLOPPY_METHOD","FORCED","target","proto","forced","comparefn","call","this","render","_vm","_h","$createElement","_c","_self","staticClass","ref","staticStyle","hots","_v","_l","item","key","id","on","$event","chooseNowCity","nm","_s","_e","i","index","k","toTop","staticRenderFns","component","module","exports","METHOD_NAME","argument","method"],"mappings":"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","file":"js/chunk-0169b72a.43b878d2.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar SLOPPY_METHOD = sloppyArrayMethod('sort');\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || SLOPPY_METHOD;\n\n// `Array.prototype.sort` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? nativeSort.call(toObject(this))\n      : nativeSort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bscroll\"},[(_vm.isLoading)?_c('Loading'):_c('Scroller',{ref:\"scroller\"},[_c('div',{staticClass:\"cityWraper\",staticStyle:{\"transform\":\"translate(0px, 0px) scale(1) translateZ(0px)\"}},[(_vm.hots.length)?_c('div',{staticClass:\"title\"},[_c('p',[_vm._v(\"热门城市\")]),_c('div',_vm._l((_vm.hots),function(item){return _c('p',{key:item.id,on:{\"tap\":function($event){return _vm.chooseNowCity(item.nm,item.id)}}},[_vm._v(_vm._s(item.nm))])}),0)]):_vm._e(),_c('div',{staticClass:\"content\"},_vm._l((_vm.cities),function(item,i){return _c('div',{key:i},[_c('p',[_vm._v(_vm._s(item.index))]),_vm._l((item.list),function(k){return _c('p',{key:k.id,on:{\"tap\":function($event){return _vm.chooseNowCity(k.nm,k.id)}}},[_vm._v(_vm._s(k.nm))])})],2)}),0)])]),_c('div',{staticClass:\"slide\"},_vm._l((_vm.cities),function(item,index){return _c('p',{key:item.index,on:{\"touchstart\":function($event){return _vm.toTop(index)}}},[_vm._v(_vm._s(item.index))])}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"bscroll\">\r\n        <Loading v-if=\"isLoading\" />\r\n        <Scroller v-else ref='scroller'>\r\n            <div class=\"cityWraper\" style='transform: translate(0px, 0px) scale(1) translateZ(0px);'>\r\n                <div class=\"title\" v-if='hots.length'>\r\n                    <p>热门城市</p>\r\n                    <div>\r\n                        <p v-for='item in hots' :key='item.id' @tap='chooseNowCity(item.nm,item.id)'>{{item.nm}}</p>\r\n                    </div>\r\n                </div>\r\n                <div class=\"content\">\r\n                    <div v-for='(item,i) in cities' :key='i'>\r\n                        <p>{{item.index}}</p>\r\n                        <p v-for='k in item.list' :key='k.id' @tap='chooseNowCity(k.nm,k.id)'>{{k.nm}}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Scroller>\r\n        <div class=\"slide\">\r\n            <p v-for='(item,index) in cities' :key='item.index' @touchstart='toTop(index)'>{{item.index}}</p>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name : 'City',\r\n    data(){\r\n        return {\r\n            hots : [],\r\n            cities : [],\r\n            isLoading : true\r\n        }\r\n    },\r\n    mounted(){\r\n        var allh = window.screen.height;\r\n        document.querySelector('.bscroll').style.height = allh-142+'px';\r\n\r\n        var hotss=window.localStorage.getItem('hotCities');\r\n        var allss=window.localStorage.getItem('allCities');\r\n        if(hotss && allss){\r\n           this.hots = JSON.parse(hotss);\r\n           this.cities = JSON.parse(allss);\r\n           this.isLoading = false;\r\n        }else{\r\n            this.axios.get('/ajax/dianying/cities.json').then(res=>{\r\n                if(res.data.cts && res.data.cts.length){\r\n                    var ajaxdata = res.data.cts;\r\n                    this.format(ajaxdata);\r\n                }\r\n            })\r\n        }\r\n    },\r\n    methods : {\r\n        format(ajaxdata){\r\n            var hotCities = [];\r\n            var allCities = [];\r\n            for(var i=0;i<ajaxdata.length;i++){\r\n                if(ajaxdata[i].isHot){\r\n                    hotCities.push({nm:ajaxdata[i].nm,id:ajaxdata[i].id})\r\n                }\r\n                if(findSzm(ajaxdata[i])){\r\n                    for(var k=0;k<allCities.length;k++){\r\n                        if(allCities[k].index == ajaxdata[i].py[0].toUpperCase()){\r\n                            allCities[k].list.push({nm:ajaxdata[i].nm,id:ajaxdata[i].id})\r\n                        }\r\n                    }\r\n                }else{\r\n                    allCities.push({index:ajaxdata[i].py[0].toUpperCase(),list:[{nm:ajaxdata[i].nm,id:ajaxdata[i].id}]})\r\n                }\r\n            }\r\n            allCities.sort((a,b)=>{\r\n                if(a.index > b.index){\r\n                    return 1\r\n                }else{\r\n                    return -1\r\n                }\r\n            })\r\n            this.hots = hotCities;\r\n            this.cities = allCities;\r\n            this.isLoading = false;\r\n            window.localStorage.setItem('hotCities',JSON.stringify(hotCities));\r\n            window.localStorage.setItem('allCities',JSON.stringify(allCities));\r\n            \r\n            function findSzm(item){\r\n                var itemSzm = item.py[0].toUpperCase();\r\n                for(var j=0;j<allCities.length;j++){\r\n                    if(itemSzm==allCities[j].index){\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        },  \r\n        handToTop(i){    \r\n            var h4s = document.querySelectorAll('.allCities>h4');\r\n            var value = h4s[i].offsetTop;\r\n            window.scrollTo({ \r\n                top: value-91,\r\n                behavior: \"instant\"\r\n            })\r\n        },\r\n        toTop(index){\r\n            var ps = document.querySelectorAll('.content>div>p:nth-of-type(1)');\r\n            var y = -ps[index].offsetTop;\r\n            this.$refs.scroller.scorllToTop(y)\r\n        },\r\n        chooseNowCity(nm,id){\r\n            window.localStorage.setItem('nowNm',nm);\r\n            window.localStorage.setItem('nowId',JSON.stringify(id));\r\n            this.$store.commit('nowCity/CHANGE_NOWCITY',{nm,id});\r\n            this.$router.push('/movie/nowplaying');\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .bscroll{\r\n        background: #ebebeb;\r\n        height: 525px;\r\n    }\r\n    .cityWraper{\r\n        background: #ebebeb;\r\n    }\r\n    .title>p:nth-of-type(1){\r\n        font-size:14px;\r\n        line-height: 30px;\r\n        text-indent: 15px;\r\n    }\r\n    .title>div{\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        background: #f5f5f5;\r\n        padding: 15px 15px 0;\r\n        margin-right: 30px;\r\n        justify-content: space-between;\r\n    }\r\n    .title>div>p{\r\n        background: #fff;\r\n        width: 30%;\r\n        text-align: center;\r\n        margin-bottom: 15px;\r\n        line-height: 30px;\r\n        border: 1px solid #e6e6e6;\r\n        border-radius: 3px;\r\n    }\r\n    .content>div>p{\r\n        text-indent: 15px;\r\n        line-height: 40px;\r\n        font-size: 14px;\r\n        background: #f5f5f5;\r\n        margin-right: 30px;\r\n        border-bottom:1px solid #ebebeb;\r\n    }\r\n    .content>div>p:nth-of-type(1){\r\n        line-height: 30px;\r\n        background: #ebebeb;\r\n    }\r\n    .slide{\r\n        position: fixed;\r\n        padding: 20px 0;\r\n        z-index: 200;\r\n        height: 485px;\r\n        background: #ebebeb;\r\n        width: 30px;\r\n        top:91px;\r\n        right: 0;\r\n        text-align: center;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-around;\r\n    }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=10822d07&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=10822d07&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10822d07\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=10822d07&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=10822d07&scoped=true&lang=css&\"","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !method || !fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n"],"sourceRoot":""}